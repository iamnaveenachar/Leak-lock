# Subscription Management App

A beautiful, modern subscription tracking application built with React, TypeScript, and Supabase.

## ğŸ“š Documentation

- **[Technical Documentation](./TECHNICAL_DOCUMENTATION.md)** - Complete technical overview including architecture, database schema, data flows, and deployment details
- **[API Documentation](./API_DOCUMENTATION.md)** - Comprehensive API reference for all endpoints, webhooks, and database operations

## ğŸš€ Features

- **Subscription Tracking** - Monitor all your recurring payments in one place
- **AI Assistant** - Get help managing subscriptions with natural language
- **n8n Integration** - Automate workflows with webhook triggers
- **SMS Sync** - Auto-detect subscriptions from SMS (planned)
- **Payment Reminders** - Never miss a billing date
- **Analytics** - Track spending patterns (planned)

## ğŸ› ï¸ Tech Stack

- **Frontend:** React 18, TypeScript, Vite
- **UI:** Tailwind CSS, shadcn/ui
- **Backend:** Supabase (PostgreSQL + Edge Functions)
- **State:** TanStack Query (React Query)
- **Routing:** React Router v6
- **AI:** Lovable AI Gateway

## ğŸ“ Project Structure

```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ ui/             # shadcn/ui components
â”‚   â”‚   â”œâ”€â”€ BackButton.tsx
â”‚   â”‚   â”œâ”€â”€ BottomNav.tsx
â”‚   â”‚   â””â”€â”€ MobileLayout.tsx
â”‚   â”œâ”€â”€ pages/              # Route components
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”œâ”€â”€ Settings.tsx
â”‚   â”‚   â”œâ”€â”€ LLMAssistant.tsx
â”‚   â”‚   â”œâ”€â”€ N8nWebhooks.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ integrations/       # Supabase client & types
â”‚   â”œâ”€â”€ App.tsx            # Main app component
â”‚   â””â”€â”€ main.tsx           # Entry point
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ functions/         # Edge functions
â”‚   â”‚   â”œâ”€â”€ subscription-assistant/
â”‚   â”‚   â””â”€â”€ trigger-n8n-webhook/
â”‚   â””â”€â”€ config.toml        # Supabase configuration
â”œâ”€â”€ TECHNICAL_DOCUMENTATION.md
â”œâ”€â”€ API_DOCUMENTATION.md
â””â”€â”€ README.md
```

## ğŸ—„ï¸ Database Schema

### Tables

**subscriptions**
- Stores user subscription data
- Fields: name, provider, amount, billing_cycle, next_billing_date, status
- RLS enabled (user-scoped access)

**n8n_webhooks**
- Manages webhook configurations for automation
- Fields: webhook_url, webhook_name, event_type, is_active
- RLS enabled (user-scoped access)

See [Technical Documentation](./TECHNICAL_DOCUMENTATION.md#database-schema) for complete schema details.

## ğŸ”Œ API Endpoints

### Edge Functions

1. **subscription-assistant** (Public)
   - AI-powered subscription management help
   - Supports: cancel, pause, renew actions
   - Returns: step-by-step instructions + direct URLs

2. **trigger-n8n-webhook** (Authenticated)
   - Triggers n8n workflows for subscription events
   - Events: added, updated, deleted, renewed, reminder
   - Returns: webhook execution results

See [API Documentation](./API_DOCUMENTATION.md) for complete API reference.

## ğŸš¦ Getting Started

### Prerequisites
- Node.js 18+
- Supabase account
- n8n instance (optional, for automation)

### Installation

1. Clone the repository
```bash
git clone <YOUR_GIT_URL>
cd <YOUR_PROJECT_NAME>
```

2. Install dependencies
```bash
npm install
```

3. Set up environment variables
```bash
# .env file is auto-generated by Supabase
VITE_SUPABASE_URL=<your-project-url>
VITE_SUPABASE_PUBLISHABLE_KEY=<your-anon-key>
```

4. Run development server
```bash
npm run dev
```

### Database Setup

Database migrations are handled automatically through Supabase. The following tables will be created:

- `subscriptions` - User subscription data
- `n8n_webhooks` - Webhook configurations

Edge functions are deployed automatically with code changes.

## ğŸ” Authentication (Planned)

Currently using localStorage for demo purposes. Production implementation will include:
- Email/password authentication
- JWT-based sessions
- Row Level Security (RLS) policies
- Secure cookie storage

## ğŸ¤– AI Integration

The app uses Lovable AI Gateway for the subscription assistant feature:
- No API key required
- Supports natural language queries
- Provider-specific instructions
- Direct management URLs

## ğŸ”— n8n Automation

Configure webhooks to trigger n8n workflows:

1. Create webhook in n8n workflow
2. Add webhook URL in Settings â†’ n8n Webhooks
3. Select event type
4. Enable webhook

**Supported Events:**
- `subscription_added` - New subscription created
- `subscription_updated` - Subscription modified
- `subscription_deleted` - Subscription removed
- `subscription_renewed` - Subscription renewed
- `payment_reminder` - Payment reminder triggered

See [Technical Documentation](./TECHNICAL_DOCUMENTATION.md#webhooks--automation) for payload details.

## ğŸ“Š Data Flow Examples

### Adding a Subscription
```
User Input â†’ Form Validation â†’ Supabase Insert â†’ 
Trigger Webhooks â†’ Update UI â†’ Show Toast
```

### AI Assistant Query
```
User Message â†’ Edge Function â†’ AI Gateway â†’ 
Provider Lookup â†’ Format Response â†’ Display Chat
```

See [Technical Documentation](./TECHNICAL_DOCUMENTATION.md#data-flows) for complete flow diagrams.

## ğŸ”’ Security

- Row Level Security (RLS) on all tables
- JWT authentication for protected endpoints
- CORS configured for edge functions
- User-scoped data access
- Secure webhook signature verification (recommended)

See [Technical Documentation](./TECHNICAL_DOCUMENTATION.md#security-considerations) for security best practices.

## ğŸš€ Deployment

- **Frontend:** Lovable Cloud (automatic)
- **Backend:** Supabase Cloud
- **Edge Functions:** Auto-deployed with code changes

No manual deployment steps required.

## ğŸ“ Environment Variables

### Frontend (.env)
```bash
VITE_SUPABASE_URL=https://gatjokqfnstxfmgxmjsf.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=<anon-key>
VITE_SUPABASE_PROJECT_ID=gatjokqfnstxfmgxmjsf
```

### Edge Functions (Auto-configured)
- `SUPABASE_URL` - Supabase project URL
- `SUPABASE_ANON_KEY` - Anonymous key
- `LOVABLE_API_KEY` - AI Gateway access

## ğŸ§ª Testing

### Manual Testing Tools
- Browser DevTools (Network, Console)
- Supabase Dashboard (Database, Logs)
- Postman/Insomnia (API testing)

### Test Data Generator
Available in Settings â†’ Developer Testing:
- Add soft evidence (missed charges)
- Add hard evidence (cancellation detected)
- Set Amazon 8-day renewal
- Clear all test data

## ğŸ“ˆ Future Enhancements

- [ ] Real SMS parsing integration
- [ ] Spending analytics dashboard
- [ ] Multiple payment method support
- [ ] Family plan sharing
- [ ] Price change alerts
- [ ] Subscription recommendations
- [ ] Export to CSV/PDF
- [ ] Dark mode support

---

## ğŸ“– Project Info

**Lovable Project URL**: https://lovable.dev/projects/8248bf29-c0a0-4110-be2d-4427550ead35

## How can I edit this code?

There are several ways of editing your application.

**Use Lovable**

Simply visit the [Lovable Project](https://lovable.dev/projects/8248bf29-c0a0-4110-be2d-4427550ead35) and start prompting.

Changes made via Lovable will be committed automatically to this repo.

**Use your preferred IDE**

If you want to work locally using your own IDE, you can clone this repo and push changes. Pushed changes will also be reflected in Lovable.

The only requirement is having Node.js & npm installed - [install with nvm](https://github.com/nvm-sh/nvm#installing-and-updating)

**Edit a file directly in GitHub**

- Navigate to the desired file(s).
- Click the "Edit" button (pencil icon) at the top right of the file view.
- Make your changes and commit the changes.

**Use GitHub Codespaces**

- Navigate to the main page of your repository.
- Click on the "Code" button (green button) near the top right.
- Select the "Codespaces" tab.
- Click on "New codespace" to launch a new Codespace environment.
- Edit files directly within the Codespace and commit and push your changes once you're done.

## How can I deploy this project?

Simply open [Lovable](https://lovable.dev/projects/8248bf29-c0a0-4110-be2d-4427550ead35) and click on Share â†’ Publish.

## Can I connect a custom domain?

Yes! Navigate to Project > Settings > Domains and click Connect Domain.

Read more: [Setting up a custom domain](https://docs.lovable.dev/features/custom-domain#custom-domain)

---

**Version:** 1.0  
**Last Updated:** 2025-10-14  
**Built with:** â¤ï¸ and Lovable